type: json
data:
  url: /_nodes/os?format=smile
  server: ${ST_MONITOR_ES_NODE_HOSTPORT}
  basicHttpAuthUsername: ${ST_MONITOR_ES_NODE_BASICAUTH_USERNAME}
  basicHttpAuthPassword: ${ST_MONITOR_ES_NODE_BASICAUTH_PASSWORD}
  smileFormat: true

observation:
  - name: node_os_stats
    metricNamespace: es
    path: $.nodes.${nodeId}.os

    metric:
      - name: cpu.allocated.count
        source: allocated_processors
        type: long_gauge
        label: number of processors
        description: number of processors allocated to the Elasticsearch process

    tag:
      - name: es.node.id
        value: ${nodeId}
